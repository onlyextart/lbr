<?php
$test = array();
$test['title'] = 'Фронт продаж!';
$test['epigraph'] = 'Если ты про себя можешь сказать – Я могу делать продажи! – значит ты всегда будешь в порядке!';
$test['wrapper'] = array();
$test['wrapper']['1'] = array();
$test['wrapper']['1']['header'] = 'Новости Филиальной сети';
//$test['wrapper']['2']['header'] = 'Новости от ПЛей техника';
//$test['wrapper']['3']['header'] = 'Новости от ПЛей запчасти';
$test['wrapper']['1']['content'] = array();
$test['wrapper']['1']['content']['collum'] = array();
$test['wrapper']['1']['content']['row'] = array();
$test['wrapper']['1']['content']['row']['1'] =
    $test['wrapper']['1']['content']['row']['2'] = array();
$test['wrapper']['1']['content']['row']['1']['caption'] = 'РЕМОНТ ДВИГ А ТЕЛЯ ТРАКТОРА КЕЙС 305';
$test['wrapper']['1']['content']['row']['2']['caption'] = '6 ЗАКАЗОВ НА 284 ДИСКА BELLOT A';
$test['wrapper']['1']['content']['row']['1']['date'] = '29.01.2014';
$test['wrapper']['1']['content']['row']['2']['date'] = '30.01.2014';
$test['wrapper']['1']['content']['row']['1']['text'] = 'Инженер технолог Живаев  Николай Викторович (Москва) при выезде к клиенту сумел продать  180 часов платного ремонта (ремонт  двигателя трактора Кейс 305). Заказ  на сервис  полностью  оплачен,  клиент  доволен.  Данный  ремонт  был  проведен  в  начале прошлого  года.  После  него  15  заказов   по  запасным  частям  были  поставлены  клиенту  на сумму  свыше  2  млн  рублей.';
$test['wrapper']['1']['content']['row']['2']['text'] = 'Менеджер  Смычков  А.  (Красноярск)  за  два  месяца  законтрактовал  6  заказов  на  284 Диска Bellota на БДМ c доходностью 18-26%. Эта товарная позиция имеет очень много дешевых  аналогов.  Кроме  того  конкуренция  среди  продавцов  Bellota  большая,  и  тем значима доходность по заказам. В настоящий момент этим менеджром ведется работа по  заказу  на  200  дисков.  Стаж  работы  менеджера  в  Компании  всего  три  месяца.';
$test['wrapper']['1']['content']['row']['1']['image'] = 'Якобы изображение';
$test['wrapper']['1']['content']['row']['2']['image'] = 'Якобы изображение';
$test['wrapper']['1']['content']['collum']['1'] =
    $test['wrapper']['1']['content']['collum']['2'] = array();

$test['wrapper']['1']['content']['collum']['1']['1'] =
    $test['wrapper']['1']['content']['collum']['1']['2'] = array();
$test['wrapper']['1']['content']['collum']['1']['1']['caption'] = 'РЕМОНТ ДВИГ А ТЕЛЯ ТРАКТОРА КЕЙС 305';
$test['wrapper']['1']['content']['collum']['1']['1']['date'] = '29.01.2014';
$test['wrapper']['1']['content']['collum']['1']['1']['text'] = 'Инженер технолог Живаев  Николай Викторович (Москва) при выезде к клиенту сумел продать  180 часов платного ремонта (ремонт  двигателя трактора Кейс 305). Заказ  на сервис  полностью  оплачен,  клиент  доволен.  Данный  ремонт  был  проведен  в  начале прошлого  года.  После  него  15  заказов   по  запасным  частям  были  поставлены  клиенту  на сумму  свыше  2  млн  рублей.';
$test['wrapper']['1']['content']['collum']['1']['1']['image'] = 'Якобы изображение';
$test['wrapper']['1']['content']['collum']['1']['2']['caption'] = '6 ЗАКАЗОВ НА 284 ДИСКА BELLOT A';
$test['wrapper']['1']['content']['collum']['1']['2']['date'] = '30.01.2014';
$test['wrapper']['1']['content']['collum']['1']['2']['text'] = 'Менеджер  Смычков  А.  (Красноярск)  за  два  месяца  законтрактовал  6  заказов  на  284 Диска Bellota на БДМ c доходностью 18-26%. Эта товарная позиция имеет очень много дешевых  аналогов.  Кроме  того  конкуренция  среди  продавцов  Bellota  большая,  и  тем значима доходность по заказам. В настоящий момент этим менеджром ведется работа по  заказу  на  200  дисков.  Стаж  работы  менеджера  в  Компании  всего  три  месяца.';
$test['wrapper']['1']['content']['collum']['1']['2']['image'] = 'Якобы изображение';
$test['wrapper']['1']['content']['collum']['2']['1'] =
    $test['wrapper']['1']['content']['collum']['2']['2'] = array();
$test['wrapper']['1']['content']['collum']['2']['1']['caption'] = 'РЕМОНТ ДВИГ А ТЕЛЯ ТРАКТОРА КЕЙС 305';
$test['wrapper']['1']['content']['collum']['2']['1']['date'] = '29.01.2014';
$test['wrapper']['1']['content']['collum']['2']['1']['text'] = 'Инженер технолог Живаев  Николай Викторович (Москва) при выезде к клиенту сумел продать  180 часов платного ремонта (ремонт  двигателя трактора Кейс 305). Заказ  на сервис  полностью  оплачен,  клиент  доволен.  Данный  ремонт  был  проведен  в  начале прошлого  года.  После  него  15  заказов   по  запасным  частям  были  поставлены  клиенту  на сумму  свыше  2  млн  рублей.';
$test['wrapper']['1']['content']['collum']['2']['1']['image'] = 'Якобы изображение';
$test['wrapper']['1']['content']['collum']['2']['2']['caption'] = '6 ЗАКАЗОВ НА 284 ДИСКА BELLOT A';
$test['wrapper']['1']['content']['collum']['2']['2']['date'] = '30.01.2014';
$test['wrapper']['1']['content']['collum']['2']['2']['text'] = 'Менеджер  Смычков  А.  (Красноярск)  за  два  месяца  законтрактовал  6  заказов  на  284 Диска Bellota на БДМ c доходностью 18-26%. Эта товарная позиция имеет очень много дешевых  аналогов.  Кроме  того  конкуренция  среди  продавцов  Bellota  большая,  и  тем значима доходность по заказам. В настоящий момент этим менеджром ведется работа по  заказу  на  200  дисков.  Стаж  работы  менеджера  в  Компании  всего  три  месяца.';
$test['wrapper']['1']['content']['collum']['2']['2']['image'] = 'Якобы изображение';

ksort($test['wrapper']);
ksort($test['wrapper']['1']['content']['row']);
ksort($test['wrapper']['1']['content']['collum']);
ksort($test['wrapper']['1']['content']['collum']['1']);
ksort($test['wrapper']['1']['content']['collum']['2']);
echo '<div class="code">';
echo '<h1>Как должна выглядеть структура:</h1>';
echo '<div><pre>';
    print_r($test);
echo '</pre>';
echo '</div></div>';

echo '<div class="code">';
echo '<h1>Струкрута, которая пришла на сервер:</h1>';
echo '<div><pre>';
    print_r($data);
echo '</pre>';
echo '</div></div>';
echo '<div style="display: block; clear: both; float: none; width: 100%; height: 2px; background: #EEE;"></div>';
?>


<?php
if(!empty($test)):?>
<div class="wrapper">
    <h1><?php echo $test['title']; ?></h1>
    <h3><?php echo $test['epigraph']; ?></h3>
    <?php if(!empty($test['wrapper'])): ?>
    <div class="w-wrapper">
        <?php for($i = 0; $i<=count($test['wrapper']); $i++): ?>
        <div class='w-w-header'>
            <?php echo $test['wrapper'][$i]['header'];?>
        </div>
            <?php 
            if (isset($test['wrapper'][$i]['content']['collum']) && !empty($test['wrapper'][$i]['content']['collum']))
                echo getCollum ($test['wrapper'][$i]['content']['collum']);
            if (isset($test['wrapper'][$i]['content']['row']) && !empty($test['wrapper'][$i]['content']['row']))
                echo getRow ($test['wrapper'][$i]['content']['row']);
            ?>
        <?php endfor;?>
    </div>
    <?php endif; ?>
</div>
<?php
endif;

function getRow($array){
    $return = '<table class="row-table">';
    for($i = 1; $i<=count($array); $i++){
        $return .= '<tr>';
            $return .= '<td class="t-r-date">';
                $return .= $array[$i]['date'];
            $return .= '</td>';
            $return .= '<td class="t-r-header">';
                $return .= $array[$i]['caption'];
            $return .= '</td>';
        $return .= '</tr>';
        $return .= '<tr>';
            $return .= '<td class="t-r-image">';
                $return .= $array[$i]['image'];;
            $return .= '</td>';
            $return .= '<td class="t-r-text">';
                $return .= $array[$i]['text'];
            $return .= '</td>';
        $return .= '</tr>';
    }
    $return .= '</table>';
    return $return;
}
function getCollum($array){
    $return = '<table class="collum-table">';
    for($i = 1; $i<=count($array); $i++){
        $return .= '<tr>';
        $c = count($array[$i]);
        if($c<=0)
            continue;
        $tdclass = floor(100/$c);
        for($k = 1; $k<=$c; $k++)
        {
            $return .= '<td class="width-'.$tdclass.'">';
                $return .= '<div class="t-c-header"><span class="t-c-date">'.$array[$i][$k]['date'].'</span> '.$array[$i][$k]['caption'].'</div>';
                $return .= '<div class="t-c-image">'.$array[$i][$k]['image'].'</div>';
                $return .= '<div class="t-c-text">'.$array[$i][$k]['text'].'</div>';
            $return .= '</td>';
        }
        $return .= '</tr>';
    }
    $return .= '</table>';
    return $return;
}
?>
<style>
    body, html
    {
        margin: 0;
        padding: 0;
        font-family: Calibri;
    }
    .code
    {
        width: 50%;
        float: left;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    .code h1
    {
        padding: 5px 15px;
        margin: 0;
        font-size: 16px;
        background: #eee;
    }
    .code > div
    {
        height: 300px;
        margin: 0;
        padding: 0;
        width: 100%;
        overflow: scroll;
    }
    .code > div > pre
    {
        padding: 0 2%;
    }
    
    /*-------paper-style---------*/
    table, tr, td, th
    {
        padding: 0;
        margin: 0;
        border: 0;
    }
    .wrapper 
    {
        background: rgb(255,251,239);
        padding: 20px 30px;
    }
    .wrapper h1
    {
        font-family: Impact;
        color: rgb(91,90,80);
        text-align: center;
        font-size: 50px;
        margin: 0px 0 0 0;
    }
    .wrapper h3
    {
        font-family: Calibri;
        color: rgb(43,42,41);
        text-align: center;
        font-size: 13.5px;
    }
    .wrapper .w-wrapper .w-w-header
    {
        background: rgb(91,90,80);
        color: white;
        font-family: Impact;
        font-size: 32px;
        padding: 0 25px;
        line-height: 44px;
    }
    .wrapper .collum-table
    {
        
    }
    .wrapper .collum-table .t-c-header
    {
        font-family: Calibri;
        font-size: 13.5px;
        color: rgb(43, 42, 41);
        font-weight: 900;
        margin-top: 15px;
    }
    .wrapper .collum-table .t-c-header .t-c-date
    {
        color: rgb(157,158,159);
        margin-right: 10px;
        padding-right: 10px;
        border-right: 2px solid rgb(43, 42, 41);
    }
    .wrapper .collum-table .t-c-image
    {
        margin: 10px 0;
    }
    .wrapper .collum-table .t-c-image
    {
        width: 95%;
    }
    .wrapper .collum-table .t-c-text
    {
        width: 95%;
        color: rgb(91,91,91);
        text-align: justify;
    }
    .wrapper .row-table
    {
        margin-top: 15px;
    }
    .wrapper .row-table .t-r-date
    {
        width: 15%;
        font-family: Calibri;
        font-size: 13.5px;
        color: rgb(43, 42, 41);
        font-weight: 900;
        color: rgb(157,158,159);
        padding-right: 10px;
        border-right: 2px solid rgb(43, 42, 41);
    }
    .wrapper .row-table .t-r-image
    {
        
    }
    .wrapper .row-table .t-r-header
    {
        font-family: Calibri;
        font-size: 13.5px;
        color: rgb(43, 42, 41);
        font-weight: 900;
        padding-left: 15px;
    }
    .wrapper .row-table .t-r-text
    {
        padding: 10px 15px 15px 0px;
        color: rgb(91,91,91);
        text-align: justify;
    }
    
</style>